import{c as d,a as p,o as r,j as g,l as b,k as W,t as D,v as h,p as O,n as V,b as i,_ as l,e as f,f as u,g as A,q as P,u as o,h as E,r as x,w as $,F as B,x as S,T as U,s as F}from"./index.js";import{a as M}from"./AssetViewPage.js";function N(e,t){var n;return(n=e.widgetArray.find(s=>s.fieldTitle===t))!=null?n:null}const ne=e=>`${d.base.url}/fileManager/tinyImageByFileId/${e}/true`,se=e=>`${d.base.url}/fileManager/previewImageByFileId/${e}/true`,ae=e=>`/asset/viewAsset/${e}`;function m({asset:e,widget:t}){return e[t.fieldTitle]}function j({widget:e,template:t,asset:n}){if(!n||!t||!n.titleObject)return!1;const s=N(t,n.titleObject),a=m({asset:n,widget:e});return!!s&&e.type==="text"&&e.fieldTitle===s.fieldTitle&&a.length===1}function q({asset:e,widget:t}){const n=m({asset:e,widget:t});return n!=null}function z({asset:e,template:t}){if(!(t&&e))return[];const n=t.widgetArray.filter(s=>s.display).filter(s=>q({asset:e,widget:s}));return n.length<2?n:n.filter(s=>!j({widget:s,template:t,asset:e})).sort((s,a)=>s.viewOrder-a.viewOrder)}function ie(e){var t,n;return(n=(t=e==null?void 0:e.title)==null?void 0:t[0])!=null?n:"(No Title)"}function le(e,t){const n=e.trim().replace("?","").replace("...","");return t.clickToSearchType===0?d.base.url+"/search/querySearch/"+encodeURIComponent(n):d.base.url+"/search/scopedQuerySearch/"+t.fieldTitle+"/"+encodeURIComponent(n)}const H=V(" - "),Q={inheritAttrs:!1},G=p({...Q,__name:"Tuple",props:{label:null,variant:{default:"stacked"}},setup(e){return(t,n)=>(r(),g("div",{class:h(["tuple",{"w-full":e.variant==="stacked","inline-flex items-baseline gap-2":e.variant==="inline"}])},[b(t.$slots,"label",{},()=>[W("span",{class:h(["tuple__label text-xs block uppercase text-neutral-900 leading-none mb-1 tracking-wide",{"font-bold":e.variant==="stacked","sr-only":e.variant==="value-only"}])},D(e.label),3)]),W("span",O({class:"tuple__value block text-neutral-600"},t.$attrs),[b(t.$slots,"default",{},()=>[H])],16)],2))}}),J=p({__name:"Widget",props:{widget:null,asset:null},setup(e){const t=e,n=i(()=>l(()=>import("./SelectWidget.js"),["assets/SelectWidget.js","assets/ClickToSearchLink.vue_vue_type_script_setup_true_lang.js","assets/index.js","assets/index.css","assets/AssetViewPage.js","assets/DefaultLayout.vue_vue_type_script_setup_true_lang.js"])),s=i(()=>l(()=>import("./CheckBoxWidget.js"),["assets/CheckBoxWidget.js","assets/index.js","assets/index.css"])),a=i(()=>l(()=>import("./TextAreaWidget.js"),["assets/TextAreaWidget.js","assets/index2.js","assets/index.js","assets/index.css","assets/Icon.js"])),_=i(()=>l(()=>import("./DateWidget.js"),["assets/DateWidget.js","assets/ClickToSearchLink.vue_vue_type_script_setup_true_lang.js","assets/index.js","assets/index.css","assets/AssetViewPage.js","assets/DefaultLayout.vue_vue_type_script_setup_true_lang.js"])),v=i(()=>l(()=>import("./MultiSelectWidget.js"),["assets/MultiSelectWidget.js","assets/MultiSelectWidget.css","assets/ClickToSearchLink.vue_vue_type_script_setup_true_lang.js","assets/index.js","assets/index.css","assets/AssetViewPage.js","assets/DefaultLayout.vue_vue_type_script_setup_true_lang.js"])),T=i(()=>l(()=>import("./LocationWidget.js"),["assets/LocationWidget.js","assets/index.js","assets/index.css","assets/Modal.js","assets/Modal.css","assets/Icon.js","assets/Button.vue_vue_type_script_setup_true_lang.js","assets/Accordion.vue_vue_type_script_setup_true_lang.js","assets/AssetViewPage.js","assets/DefaultLayout.vue_vue_type_script_setup_true_lang.js"])),c=i(()=>l(()=>import("./UploadWidget.js"),["assets/UploadWidget.js","assets/index.js","assets/index.css","assets/AssetViewPage.js","assets/DefaultLayout.vue_vue_type_script_setup_true_lang.js","assets/ThumbnailImage.js","assets/ThumbnailImage.css","assets/Icon.js"])),I=i(()=>l(()=>import("./TagWidget.js"),["assets/TagWidget.js","assets/index.js","assets/index.css","assets/AssetViewPage.js","assets/DefaultLayout.vue_vue_type_script_setup_true_lang.js"])),k=i(()=>l(()=>import("./RelatedAssetWidget.js"),["assets/RelatedAssetWidget.js","assets/Accordion.vue_vue_type_script_setup_true_lang.js","assets/index.js","assets/index.css","assets/AssetViewPage.js","assets/DefaultLayout.vue_vue_type_script_setup_true_lang.js","assets/ThumbnailImage.js","assets/ThumbnailImage.css","assets/Icon.js","assets/Link.vue_vue_type_script_setup_true_lang.js"])),L=i(()=>l(()=>import("./TextWidget.js"),["assets/TextWidget.js","assets/ClickToSearchLink.vue_vue_type_script_setup_true_lang.js","assets/index.js","assets/index.css","assets/AssetViewPage.js","assets/DefaultLayout.vue_vue_type_script_setup_true_lang.js"])),R=f(()=>m({asset:t.asset,widget:t.widget})),C={text:L,select:n,checkbox:s,"text area":a,date:_,multiselect:v,location:T,upload:c,"tag list":I,"related asset":k};function y(w){return C[w]||null}return(w,Z)=>(r(),u(G,{label:e.widget.label},{default:A(()=>[y(e.widget.type)?(r(),u(P(y(e.widget.type)),{key:0,widget:e.widget,contents:o(R),asset:e.asset},null,8,["widget","contents","asset"])):E("",!0)]),_:1},8,["label"]))}});function K(e){const t=x(null),n=x(null);return $(e,async()=>{const{asset:s,template:a}=await M.getAssetWithTemplate(e.value);t.value=s,n.value=a},{immediate:!0}),{asset:t,template:n}}const X={key:0,class:"widget-list flex flex-col gap-8"},Y=p({__name:"WidgetList",props:{assetId:null},setup(e){const t=e,n=f(()=>t.assetId),{asset:s,template:a}=K(n),_=f(()=>z({asset:s.value,template:a.value}));return(v,T)=>(r(),u(U,{name:"fade"},{default:A(()=>[o(s)&&o(a)?(r(),g("div",X,[(r(!0),g(B,null,S(o(_),c=>(r(),u(J,{key:c.widgetId,widget:c,asset:o(s)},null,8,["widget","asset"]))),128))])):E("",!0)]),_:1}))}});const re=F(Y,[["__scopeId","data-v-a21fd3b1"]]);export{re as W,G as _,ae as a,se as b,ne as c,ie as g,le as t,K as u};
//# sourceMappingURL=WidgetList.js.map
