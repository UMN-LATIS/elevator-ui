import{u as S,a as C}from"./AssetViewPage.js";import{a as v,o as l,j as i,u as n,c as y,k as c,t as h,v as T,h as m,l as I,m as r,y as q,z as G,s as B,g as d,A as Y,b as R,_ as H,r as w,e as x,f as $,F as k,x as D,n as _,B as Z,w as ee}from"./index.js";import{_ as O,W as J,a as M,b as te,u as le,g as se}from"./WidgetList.js";import{_ as j}from"./Button.vue_vue_type_script_setup_true_lang.js";import{I as U}from"./Icon.js";import{M as L}from"./Modal.js";import{_ as ae}from"./Accordion.vue_vue_type_script_setup_true_lang.js";import{u as ne,a as oe}from"./index2.js";import{_ as K,a as ie}from"./Link.vue_vue_type_script_setup_true_lang.js";import"./DefaultLayout.vue_vue_type_script_setup_true_lang.js";const re={class:"object-viewer bg-neutral-300"},de=c("h2",{class:"sr-only"},"Object Viewer",-1),ce=["src"],ue={key:1,class:"w-full h-full min-h-[20rem] bg-neutral-400 place-items-center p-8"},me=c("p",null,"No asset file found.",-1),fe={class:"text-sm"},he=v({__name:"ObjectViewer",props:{fileHandlerId:null},setup(e){return(a,s)=>{var t;return l(),i("section",re,[de,e.fileHandlerId?(l(),i("iframe",{key:0,class:"object-viewer__iframe w-full h-full min-h-[20rem]",src:`${n(y).base.url}/asset/getEmbed/${e.fileHandlerId}`,frameBorder:"0",allowfullscreen:"true"},null,8,ce)):(l(),i("div",ue,[me,c("code",fe,"FileHandlerId: "+h((t=e.fileHandlerId)!=null?t:"null"),1)]))])}}}),_e=["title"],ve=["innerHTML"],be=v({__name:"DrawerLabel",props:{label:null,variant:null,isOpen:{type:Boolean}},setup(e){return(a,s)=>(l(),i("h1",{class:T(["header-label font-bold relative text-left",{"sm:text-3xl md:text-4xl":e.variant==="primary"&&e.isOpen,"sm:text-2xl md:text-3xl":e.label.length>=100&&e.label.length<200&&e.isOpen,"sm:text-xl md:text-xl":e.label.length>=200&&e.isOpen}]),title:e.label},[c("span",{class:"min-w-0 block",innerHTML:e.label},null,8,ve)],10,_e))}}),ge={class:"drawer bg-neutral-100 flex flex-col"},pe=["disabled"],$e={key:0,class:"material-symbols-outlined"},xe=v({__name:"Drawer",props:{label:null,variant:{default:"primary"},isOpen:{type:Boolean,default:!0},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){return(a,s)=>(l(),i("section",ge,[c("header",{class:T(["flex items-center sticky top-0 left-0 justify-between z-10",{"bg-neutral-50":e.variant==="primary","bg-neutral-900 text-neutral-200":e.variant==="secondary","h-full":!e.isOpen,"md:py-4":e.variant==="primary"&&e.isOpen}])},[c("button",{disabled:!e.showToggle,class:"flex items-center p-4 leading-tight gap-4 flex-1",onClick:s[0]||(s[0]=t=>a.$emit("toggle"))},[e.showToggle?(l(),i("span",$e,h(e.isOpen?"expand_more":"expand_less"),1)):m("",!0),I(a.$slots,"header-label",{},()=>[r(be,{label:e.label,variant:e.variant,isOpen:e.isOpen},null,8,["label","variant","isOpen"])],!0)],8,pe),c("div",null,[I(a.$slots,"header-utils",{},void 0,!0)])],2),q(c("div",{class:T(["text-neutral-500 flex flex-col gap-8 px-4 py-8 md:p-8 flex-1 h-min overflow-auto",{"bg-neutral-200":e.variant==="secondary"}])},[I(a.$slots,"default",{},void 0,!0)],2),[[G,e.isOpen]])]))}});const P=B(xe,[["__scopeId","data-v-61d2cf86"]]),ye={class:"p-2 flex items-center"},V=v({__name:"ActiveFileViewButton",setup(e){return(a,s)=>(l(),i("button",ye,[r(U,null,{default:d(()=>[I(a.$slots,"default")]),_:3})]))}}),we={},Ie={class:"rounded-md max-w-sm w-full py-4"},ke=Y('<div class="animate-pulse flex space-x-4"><div class="flex-1 space-y-6 py-1"><div class="h-4 bg-neutral-300 rounded w-1/2"></div><div class="h-2 bg-neutral-300 rounded"></div><div class="space-y-3"><div class="grid grid-cols-3 gap-4"><div class="h-2 bg-neutral-300 rounded col-span-2"></div><div class="h-2 bg-neutral-300 rounded col-span-1"></div></div><div class="h-2 bg-neutral-50 rounded"></div></div></div></div>',1),Oe=[ke];function Te(e,a){return l(),i("div",Ie,Oe)}const je=B(we,[["render",Te]]),Fe=_(" info "),De={key:0},Me={key:1},Se={key:0},Ae={key:1,class:"flex flex-col gap-6"},Ce={class:"bg-neutral-200 p-4 rounded-xl"},Be={key:2},Le=c("h2",{class:"text-xl font-bold mt-6 border-t pt-6"},"EXIF Details",-1),Ve=v({__name:"MoreFileInfoButton",setup(e){const a=R(()=>H(()=>import("./Map.js"),["assets/Map.js","assets/Map.css","assets/index2.js","assets/index.js","assets/index.css","assets/mapConstants.js","assets/AssetViewPage.js","assets/DefaultLayout.vue_vue_type_script_setup_true_lang.js"])),s=R(()=>H(()=>import("./MapMarker.js"),["assets/MapMarker.js","assets/mapConstants.js","assets/AssetViewPage.js","assets/index.js","assets/index.css","assets/DefaultLayout.vue_vue_type_script_setup_true_lang.js"])),t=w(!1),o=w(void 0),g=x(()=>o.value!==void 0),f=S();async function u(){t.value=!t.value,o.value=void 0,o.value=await C.getFileMetaData(f.activeFileObjectId)}return(p,b)=>(l(),$(V,{onClick:u},{default:d(()=>[Fe,r(L,{label:"File Info",isOpen:t.value,class:"max-w-4xl m-auto",onClose:b[0]||(b[0]=F=>t.value=!1)},{default:d(()=>{var F;return[n(g)?m("",!0):(l(),i("div",De,[(l(),i(k,null,D(10,A=>r(je,{key:A})),64))])),n(g)?(l(),i("div",Me,[o.value?m("",!0):(l(),i("span",Se,"No meta data found.")),o.value?(l(),i("section",Ae,[r(O,{label:"File Type"},{default:d(()=>[_(h(o.value.exif.File.FileType),1)]),_:1}),r(O,{label:"Original Name"},{default:d(()=>[_(h(o.value.sourcefile),1)]),_:1}),r(O,{label:"File Size"},{default:d(()=>[_(h(o.value.exif.File.FileSize),1)]),_:1}),r(O,{label:"Image Size"},{default:d(()=>[_(h(o.value.width)+"x"+h(o.value.height),1)]),_:1}),o.value.coordinates?(l(),$(O,{key:0,label:"Location"},{default:d(()=>[c("div",Ce,[r(n(a),{center:{lng:o.value.coordinates[0],lat:o.value.coordinates[1]},zoom:10,mapStyle:"streets",apiKey:n(y).arcgis.apiKey,class:""},{default:d(()=>[r(n(s),{lng:o.value.coordinates[0],lat:o.value.coordinates[1]},null,8,["lng","lat"])]),_:1},8,["center","apiKey"])])]),_:1})):m("",!0)])):m("",!0),(F=o.value)!=null&&F.exif?(l(),i("section",Be,[Le,(l(!0),i(k,null,D(o.value.exif,(A,N)=>(l(),$(ae,{key:N,label:N,class:"border mt-6"},{default:d(()=>[(l(!0),i(k,null,D(A,(X,E)=>(l(),$(O,{key:E,label:E},{default:d(()=>[_(h(X),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["label"]))),128))])):m("",!0)])):m("",!0)]}),_:1},8,["isOpen"])]),_:1}))}}),Ne=_(" download "),Ee={key:0},Re={key:0},He={key:1},ze={key:0},We=["href"],Je=v({__name:"DownloadFileButton",setup(e){const a=S(),s=w(!1),t=w(void 0),o=x(()=>t.value!==void 0),g=u=>{const p=u.split(".");return p[p.length-1]};async function f(){s.value=!0,t.value=void 0,t.value=await C.getFileDownloadInfo(a.activeFileObjectId,a.activeAssetId)}return(u,p)=>(l(),i(k,null,[r(V,{onClick:f},{default:d(()=>[Ne]),_:1}),r(L,{label:"File Downloads",isOpen:s.value,onClose:p[0]||(p[0]=b=>s.value=!1)},{default:d(()=>{var b;return[n(o)?(l(),i("div",Ee,[t.value?m("",!0):(l(),i("span",Re,"No Downloads available")),t.value?(l(),i("ul",He,[(b=t.value.screen)!=null&&b.ready?(l(),i("li",ze,[c("a",{href:`${n(y).base.url}/fileManager/getDerivativeById/${n(a).activeFileObjectId}/screen`}," Download Derivative ("+h(g(t.value.screen.originalFilename))+") ",9,We)])):m("",!0)])):m("",!0)])):m("",!0)]}),_:1},8,["isOpen"])],64))}}),Ue={class:"flex justify-between items-baseline"},Ke={for:"share-embed",class:"block text-sm font-medium text-gray-700"},Pe={class:"mt-1 flex rounded-md shadow-sm relative"},Qe=["placeholder","value"],Xe=v({__name:"TextArea",props:{label:null,value:null,placeholder:{default:""}},emits:["input"],setup(e){return(a,s)=>(l(),i("div",null,[c("div",Ue,[I(a.$slots,"label",{},()=>[c("label",Ke,h(e.label),1)]),c("div",null,[I(a.$slots,"corner")])]),c("div",Pe,[c("textarea",{id:"share-embed",name:"share-embed",class:"block w-full rounded border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 font-mono text-neutral-500 focus:text-neutral-900 h-24",placeholder:e.placeholder,value:e.value,onInput:s[0]||(s[0]=t=>a.$emit("input",t))},null,40,Qe)])]))}}),z=v({__name:"CopyableTextArea",props:{label:null,value:null,placeholder:{default:""}},setup(e){const s=Z(e,"value"),{copy:t,copied:o}=ne({source:s,copiedDuring:3e3});return(g,f)=>(l(),$(Xe,{label:e.label,value:e.value,placeholder:e.placeholder},{corner:d(()=>[r(j,{icon:n(o)?"check":"content_copy",variant:"tertiary",onClick:f[0]||(f[0]=u=>n(t)())},{default:d(()=>[_(h(n(o)?"Copied":"Copy"),1)]),_:1},8,["icon"])]),_:1},8,["label","value","placeholder"]))}}),qe=_("share"),Ge={class:"flex flex-col gap-4"},Ye=_("Open Viewer in New Window"),Ze=v({__name:"ShareButton",setup(e){const a=S(),s=f=>f.replace(/\s+/g," ").trim(),t=w(!1),o=x(()=>`${y.base.url}/asset/getEmbed/${a.activeFileObjectId}/null/true`),g=x(()=>s(`
  <iframe width="560" height="480" src="${o.value}" frameborder="0" allowfullscreen></iframe>`));return(f,u)=>(l(),i(k,null,[r(V,{onClick:u[0]||(u[0]=p=>t.value=!t.value)},{default:d(()=>[qe]),_:1}),r(L,{label:"Share",isOpen:t.value,class:"max-w-xl mx-auto",onClose:u[1]||(u[1]=p=>t.value=!1)},{default:d(()=>[c("div",Ge,[r(z,{label:"Embed",value:n(g)},null,8,["value"]),r(z,{label:"Link",value:n(o)},null,8,["value"]),r(j,{icon:"open_in_new",label:"Open in New Window",href:n(o),target:"_blank"},{default:d(()=>[Ye]),_:1},8,["href"])])]),_:1},8,["isOpen"])],64))}}),et={class:"object-toolbar"},tt={class:"flex justify-between items-center w-full px-4 py-2"},lt={class:"flex gap-1 items-center leading-none"},W=v({__name:"ActiveFileViewToolbar",setup(e){return(a,s)=>(l(),i("div",et,[c("div",tt,[c("div",lt,[r(Ve),r(Je),r(Ze)])])]))}}),st={class:"object-details"},at={key:0,class:"bg-neutral-900 text-neutral-300 h-full flex justify-end"},nt={key:1,class:"flex gap-2"},ot=_(" Old View "),it=_(" JSON "),rt=v({__name:"ObjectDetailsDrawer",props:{objectId:null,isOpen:{type:Boolean,default:!1},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){const a=e,s=x(()=>a.objectId?M(a.objectId):null);return(t,o)=>(l(),i("div",st,[e.objectId?(l(),$(P,{key:1,label:"Details",variant:"secondary",isOpen:e.isOpen,showToggle:e.showToggle,class:"h-full",onToggle:o[0]||(o[0]=g=>t.$emit("toggle"))},{"header-utils":d(()=>[r(W)]),default:d(()=>[e.objectId?(l(),$(J,{key:0,assetId:e.objectId},null,8,["assetId"])):m("",!0),e.objectId?(l(),i("footer",nt,[n(s)?(l(),$(K,{key:0,to:n(s)},null,8,["to"])):m("",!0),r(j,{href:`${n(y).base.url}/${n(s)}`,icon:"image",target:"_blank",variant:"tertiary"},{default:d(()=>[ot]),_:1},8,["href"]),r(j,{href:`${n(y).base.url}/${n(s)}/true`,label:"Asset Json",icon:"data_object",target:"_blank",variant:"tertiary"},{default:d(()=>[it]),_:1},8,["href"])])):m("",!0)]),_:1},8,["isOpen","showToggle"])):(l(),i("div",at,[r(W)]))]))}}),dt={class:"border shadow-sm rounded-md overflow-hidden flex flex-col"},ct={class:"placeholder-image bg-neutral-300 w-full aspect-video flex justify-center items-center overflow-hidden"},ut=["src","alt"],mt={class:"p-4 bg-white flex-1"},ft=v({__name:"MediaCard",props:{imgSrc:null,imgAlt:null,fallbackThumbnailIcon:null},setup(e){return(a,s)=>(l(),i("article",dt,[c("div",ct,[e.imgSrc?(l(),i("img",{key:0,src:e.imgSrc,alt:e.imgAlt||"Untitled",class:"w-full h-full object-cover"},null,8,ut)):(l(),$(U,{key:1},{default:d(()=>[_(h(e.fallbackThumbnailIcon||"image"),1)]),_:1}))]),c("div",mt,[I(a.$slots,"default")])]))}}),ht={class:"h-full pb-16 relative"},_t={class:"font-bold text-xl mb-2 text-neutral-900"},vt={key:0,class:"grid gap-3"},bt={class:"text-xs text-neutral-400 uppercase col-span-1 flex items-start justify-start hyphens"},gt={class:"text-sm col-span-2"},pt=v({__name:"SearchResultCard",props:{searchMatch:null},setup(e){const a=e,s=x(()=>Array.isArray(a.searchMatch.title)?a.searchMatch.title.join(","):a.searchMatch.title&&a.searchMatch.title.length>0?a.searchMatch.title:"(no title)"),t=x(()=>{const{primaryHandlerId:o}=a.searchMatch;return o?te(o):null});return(o,g)=>(l(),$(ft,{imgSrc:n(t),imgAlt:n(s),class:"hover:shadow-lg transition-shadow"},{default:d(()=>{var f;return[c("div",ht,[r(ie,{to:n(M)(e.searchMatch.objectId)},{default:d(()=>[c("h1",_t,h(n(s)),1)]),_:1},8,["to"]),(f=a.searchMatch)!=null&&f.entries?(l(),i("dl",vt,[(l(!0),i(k,null,D(a.searchMatch.entries,(u,p)=>{var b;return l(),i("div",{key:p},[c("dt",bt,h((u==null?void 0:u.label)||"Item"),1),c("dd",gt,h((b=u.entries)==null?void 0:b.join(", ")),1)])}),128))])):m("",!0),r(K,{to:n(M)(e.searchMatch.objectId),class:"absolute bottom-0 right-0"},null,8,["to"])])]}),_:1},8,["imgSrc","imgAlt"]))}});const $t=B(pt,[["__scopeId","data-v-600c8b70"]]),xt={key:0,class:"border-t border-neutral-900 mt-6 pt-6"},yt={class:"font-bold text-xl text-neutral-900 flex items-center gap-2 flex-wrap mb-4"},wt=_(" More Like This "),It={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-normal bg-neutral-900 text-neutral-100"},kt=v({__name:"MoreLikeThis",props:{items:null},setup(e){return(a,s)=>e.items.length?(l(),i("div",xt,[c("h3",yt,[wt,c("span",It,h(e.items.length),1)]),(l(!0),i(k,null,D(e.items,t=>(l(),$($t,{key:t.objectId,searchMatch:t},null,8,["searchMatch"]))),128))])):m("",!0)}});function Q(e){const a=w([]);return ee(e,async()=>{a.value=await C.getMoreLikeThis(e.value)},{immediate:!0}),{matches:a}}const Ot={class:"asset-details"},Tt={key:1,class:"flex gap-2"},jt=_(" Old View "),Ft=_(" JSON "),Dt=v({__name:"AssetDetailsDrawer",props:{assetId:null,isOpen:{type:Boolean,default:!0},showToggle:{type:Boolean,default:!0}},emits:["toggle"],setup(e){const a=e,s=x(()=>a.assetId),{asset:t}=le(s),{matches:o}=Q(s),g=x(()=>t.value?se(t.value):"");return(f,u)=>(l(),i("div",Ot,[r(P,{label:n(g),isOpen:e.isOpen,showToggle:e.showToggle,class:"h-full",onToggle:u[0]||(u[0]=p=>f.$emit("toggle"))},{default:d(()=>[e.assetId?(l(),$(J,{key:0,assetId:e.assetId},null,8,["assetId"])):m("",!0),r(kt,{items:n(o)},null,8,["items"]),e.assetId?(l(),i("footer",Tt,[r(j,{href:`${n(y).base.url}/${n(M)(e.assetId)}`,icon:"image",target:"_blank",variant:"tertiary"},{default:d(()=>[jt]),_:1},8,["href"]),r(j,{href:`${n(y).base.url}/${n(M)(e.assetId)}/true`,label:"Asset Json",icon:"data_object",target:"_blank",variant:"tertiary"},{default:d(()=>[Ft]),_:1},8,["href"])])):m("",!0)]),_:1},8,["label","isOpen","showToggle"])]))}}),Mt={class:"h-full relative"},zt=v({__name:"AssetView",props:{assetId:null,objectId:null},setup(e){const a=e,s=w(!0),t=w(!1),o=S(),g=x(()=>a.assetId),{matches:f}=Q(g),u=oe("(min-width: 768px)");return(p,b)=>(l(),i("div",Mt,[r(he,{class:T(["h-[75vh] md:h-auto md:absolute md:top-0",{"md:top-0 md:bottom-1/2 md:left-sm md:right-0":s.value&&t.value,"md:top-0 md:bottom-16 md:left-sm md:right-0":s.value&&!t.value,"md:top-0 md:bottom-16 md:left-0 md:right-sm":!s.value&&t.value,"md:top-0 md:bottom-16 md:left-0 md:right-0":!s.value&&!t.value}]),fileHandlerId:n(o).activeFileObjectId},null,8,["class","fileHandlerId"]),r(Dt,{class:T(["md:absolute md:overflow-y-scroll",{"md:bottom-0 md:left-0 md:top-0 md:w-sm":s.value,"md:bottom-0 md:left-0 md:h-16 md:right-sm":!s.value&&t.value,"md:bottom-0 md:left-0 md:h-16 md:w-1/2":!s.value&&!t.value}]),showToggle:n(u),assetId:n(o).activeAssetId,isOpen:n(u)?s.value:!0,onToggle:b[0]||(b[0]=F=>s.value=!s.value)},null,8,["class","showToggle","assetId","isOpen"]),r(rt,{class:T(["md:absolute",{"md:bottom-0 md:right-0 md:h-16 md:left-sm":!t.value&&s.value,"md:bottom-0 md:right-0 md:h-1/2 md:left-sm":t.value&&s.value,"md:bottom-0 md:right-0 md:top-0 md:w-sm":t.value&&!s.value,"md:bottom-0 md:right-0 md:h-16 md:w-1/2":!t.value&&!s.value}]),showToggle:n(u),moreLikeThisItems:n(f),objectId:n(o).activeObjectId,isOpen:n(u)?t.value:!0,onToggle:b[1]||(b[1]=F=>t.value=!t.value)},null,8,["class","showToggle","moreLikeThisItems","objectId","isOpen"])]))}});export{zt as default};
//# sourceMappingURL=AssetView.js.map
